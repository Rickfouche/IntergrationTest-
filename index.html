<script>
  window.addEventListener("DOMContentLoaded", () => {
    const sceneEl = document.querySelector("a-scene");
    const loader = document.getElementById("loader");
    const flux = document.querySelector("#flux");
    const target = document.querySelector("[mindar-image-target]");
    const sceneContainer = document.querySelector(".ar-scene-container");
    const tapCatcher = document.getElementById("tap-catcher");

    const revealScene = () => {
      loader.style.opacity = "0";
      setTimeout(() => {
        loader.style.display = "none";
        sceneContainer.style.display = "block";
        console.log("ðŸŽ¬ Scene revealed (fallback or arReady)");
      }, 500);
    };

    // Primary trigger
    sceneEl.addEventListener("arReady", () => {
      console.log("âœ… MindAR camera ready");
      revealScene();
    });

    // Fallback after 6 seconds in case arReady fails
    setTimeout(() => {
      if (loader.style.display !== "none") {
        console.warn("â° Fallback triggered: MindAR may not have initialized correctly.");
        revealScene();
      }
    }, 6000);

    flux.addEventListener("model-loaded", () => {
      console.log("âœ… Flux model loaded. Applying chrome material...");
      flux.object3D.traverse((node) => {
        if (node.isMesh && node.material && node.material.isMeshStandardMaterial) {
          node.material.envMapIntensity = 4.0;
          node.material.metalness = 1.0;
          node.material.roughness = 0.01;
          node.material.color.set("white");
          node.material.emissive.set("black");
          node.material.emissiveIntensity = 0;
          node.material.needsUpdate = true;
        }
      });
    });

    target.addEventListener("targetFound", () => {
      console.log("ðŸŽ¯ Target Found");
      tapCatcher.style.display = "block";
    });

    target.addEventListener("targetLost", () => {
      console.log("ðŸ«¥ Target Lost");
      tapCatcher.style.display = "none";
    });

    tapCatcher.addEventListener("click", () => {
      window.location.href = "https://neondoorway.com/mirrorborn";
    });
  });
</script>








